require([],function(){var e=new Nav;e.init()});var Nav=function(){function m(){$(".content").removeClass("rearrange").addClass("fadeIn")}var e=[],t={},n,r=[],i={},s={test:"test"},o=document.URL,u=window.location.hash?window.location.hash:"",a=$(".welcome-text"),f=$(".page-title"),l="index",c="nav",h=[l,c],p,d=new Event("pagesetup");document.addEventListener("pagesetup",m);var v=function(){$(".choice").each(E(s));if(u&&s[u]){p=c;$(".content").addClass("rearrange");g(s[u],!0,m)}else p=l},g=function(e,t,n){$(".index-stuff").animate({opacity:0},function(){$(".page-title").text(e.getName());t?$(".page-title").removeClass("invisible"):e.setAsClicked();a.remove();console.log(e.getName());$navChoices=$(".nav-choices");$(".choice-hide").addClass("choice").removeClass("choice-hide");$(".choice.invisible").removeClass("choice invisible").addClass("choice-hide");$navChoices.detach();$(".content").append($navChoices);$navChoices.removeClass("nav-choices").addClass("nav-choices-menu");e.greyOut();$navChoices.animate({opacity:1});n&&n()})},y=function(e){function i(e,t){return function(){t.text(e);$(this).text(e);$(this).animate({top:0},function(){$(".page-title").removeClass("invisible");$(this).remove()})}}var t=$(".page-title"),n=t.height(),r=helpers.makeCopyOnTop(t);t.addClass("invisible");$("body").append(r);r.animate({top:n*-1},i(e,t))},b=function(t){if(p==l){p=c;for(var n in e)if(e.hasOwnProperty(n)){var s=e[n],o=t.getName(),u=s.getName();s.setNavMode(p);if(u!=o){r.push(e[s]);i[u]}}g(t)}else{$(".selected").removeClass("selected");t.greyOut();y(t.getName())}},w=function(r){var i=$(this).text(),s=e[t[i]];n=s;var o=s.getNavMode();b(n);o!=l&&o==c},E=function(n){var n=n;return function(r,i){var s=$(this).text(),o=e.length,u=new Choice;u.init(s,$(this),l);u.obj().find("a").click(w);console.log(u.getHref());n[u.getHref()]=u;e.push(u);t[s]=o}},S={init:v};return S},Choice=function(){function f(e){}var e="",t,n,r="",i,s,o=function(e,t,n){e&&(this.name=e);if(t){this.$this=t;this.href=this.$this.find("a").attr("href")}n&&(this.navMode=n)},u=function(){var e=this.$this.offset(),t=this.$this.width(),n=this.$this.css("font-size"),r=this.$this.get(0).cloneNode(!0);$copy=$(r);var i=$(".page-title").offset();$copy.addClass("selected-and-pre-moving");$copy.offset(e);$copy.width(t);$("body").append($copy);$copy.removeClass("selected-and-pre-moving").addClass("selected-and-moving");$copy.animate({top:i.top,left:i.left},function(){$(".page-title").removeClass("invisible");$copy.remove()})},a=function(){this.$this.addClass("selected")},l=function(){return this.$this},c=function(){return this.navMode},h=function(){return this.name},p=function(){return this.href},d=function(e){e&&(this.navMode=e)},v=function(e){this.choiceArrayIndex=e},m=function(e){this.unclickedChoiceArrayIndex=e},g={init:o,setAsClicked:u,greyOut:a,obj:l,getNavMode:c,getName:h,getHref:p,setNavMode:d,setChoiceArrayIndex:v,setUnclickedChoiceArrayIndex:m};return g};